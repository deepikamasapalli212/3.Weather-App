<!DOCTYPE html>
<html>
<head>
<title>Weather Application</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:Arial,sans-serif;
}

body{
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    overflow:hidden;
    transition:background 1s ease;
}

.day{
    background:linear-gradient(to top,#87ceeb,#4facfe);
}

.night{
    background:linear-gradient(to top,#000428,#004e92);
}

.star{
    position:absolute;
    width:2px;
    height:2px;
    background:white;
    border-radius:50%;
    animation:twinkle 2s infinite alternate;
}

@keyframes twinkle{
    from{opacity:0.3;}
    to{opacity:1;}
}

.cloud{
    position:absolute;
    width:200px;
    height:60px;
    background:white;
    border-radius:50px;
    opacity:0.5;
    filter:blur(8px);
    animation:moveCloud 40s linear infinite;
}

@keyframes moveCloud{
    from{transform:translateX(-200px);}
    to{transform:translateX(120vw);}
}

.rain{
    position:absolute;
    width:2px;
    height:15px;
    background:white;
    opacity:0.6;
    animation:rainFall 0.6s linear infinite;
}

@keyframes rainFall{
    from{transform:translateY(-100vh);}
    to{transform:translateY(100vh);}
}

.weather-container{
    width:360px;
    padding:35px;
    border-radius:20px;
    background:rgba(255,255,255,0.2);
    backdrop-filter:blur(15px);
    box-shadow:0 0 40px rgba(0,0,0,0.3);
    text-align:center;
    z-index:10;
}

input{
    width:70%;
    padding:10px;
    border-radius:10px;
    border:none;
    outline:none;
}

button{
    padding:10px 15px;
    border:none;
    border-radius:10px;
    background:#4facfe;
    color:white;
    font-weight:bold;
    cursor:pointer;
    margin-left:5px;
}

.temp{
    font-size:2.5rem;
    margin:10px 0;
}

.error{
    color:red;
}
</style>
</head>

<body class="day">

<div class="weather-container">
    <h1>Weather App</h1>
    <input type="text" id="cityInput" placeholder="Enter city name">
    <button onclick="getWeather()">Search</button>
    <div id="weatherInfo"></div>
</div>

<script>

const apiKey = "7dfe0979f486e7f3b0d0dabf94ec83e6";

function getWeather(){

    const city = document.getElementById("cityInput").value.trim();
    const info = document.getElementById("weatherInfo");

    if(city === ""){
        info.innerHTML = "<p class='error'>Please enter city name</p>";
        return;
    }

    const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;

    fetch(url)
    .then(response => response.json())
    .then(data => {

        if(data.cod != 200){
            info.innerHTML = "<p class='error'>City not found</p>";
            return;
        }

        info.innerHTML = `
            <h2>${data.name}</h2>
            <div class="temp">${data.main.temp}Â°C</div>
            <p>${data.weather[0].main}</p>
            <p>Humidity: ${data.main.humidity}%</p>
            <p>Wind: ${data.wind.speed} m/s</p>
        `;

        applyWeatherTheme(data);

    })
    .catch(error=>{
        info.innerHTML = "<p class='error'>Error fetching data</p>";
        console.log(error);
    });
}

function applyWeatherTheme(data){

    removeEffects();

    const currentTime = data.dt;
    const sunrise = data.sys.sunrise;
    const sunset = data.sys.sunset;

    if(currentTime >= sunrise && currentTime < sunset){
        document.body.className="day";
        createClouds();
    }else{
        document.body.className="night";
        createStars();
    }

    const type = data.weather[0].main;

    if(type === "Rain" || type === "Drizzle" || type === "Thunderstorm"){
        createRain();
    }
}

function createClouds(){
    for(let i=0;i<2;i++){
        const cloud=document.createElement("div");
        cloud.className="cloud";
        cloud.style.top=(80+ i*80)+"px";
        document.body.appendChild(cloud);
    }
}

function createStars(){
    for(let i=0;i<100;i++){
        const star=document.createElement("div");
        star.className="star";
        star.style.top=Math.random()*100+"vh";
        star.style.left=Math.random()*100+"vw";
        document.body.appendChild(star);
    }
}

function createRain(){
    for(let i=0;i<100;i++){
        const drop=document.createElement("div");
        drop.className="rain";
        drop.style.left=Math.random()*100+"vw";
        drop.style.animationDuration=(0.3+Math.random())+"s";
        document.body.appendChild(drop);
    }
}

function removeEffects(){
    document.querySelectorAll(".cloud,.star,.rain")
    .forEach(e=>e.remove());
}

</script>

</body>
</html>
